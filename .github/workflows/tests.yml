# =======================================================================================
#                 $$$$$$\  $$$$$$\ $$$$$$$$\ $$\   $$\ $$\   $$\ $$$$$$$\           
#                $$  __$$\ \_$$  _|\__$$  __|$$ |  $$ |$$ |  $$ |$$  __$$\          
#                $$ /  \__|  $$ |     $$ |   $$ |  $$ |$$ |  $$ |$$ |  $$ |         
#                $$ |$$$$\   $$ |     $$ |   $$$$$$$$ |$$ |  $$ |$$$$$$$\ |         
#                $$ |\_$$ |  $$ |     $$ |   $$  __$$ |$$ |  $$ |$$  __$$\          
#                $$ |  $$ |  $$ |     $$ |   $$ |  $$ |$$ |  $$ |$$ |  $$ |         
#                \$$$$$$  |$$$$$$\    $$ |   $$ |  $$ |\$$$$$$  |$$$$$$$  |         
#                 \______/ \______|   \__|   \__|  \__| \______/ \_______/          
#            $$$$$$\   $$$$$$\ $$$$$$$$\ $$$$$$\  $$$$$$\  $$\   $$\  $$$$$$\  
#           $$  __$$\ $$  __$$\\__$$  __|\_$$  _|$$  __$$\ $$$\  $$ |$$  __$$\ 
#           $$ /  $$ |$$ /  \__|  $$ |     $$ |  $$ /  $$ |$$$$\ $$ |$$ /  \__|
#           $$$$$$$$ |$$ |        $$ |     $$ |  $$ |  $$ |$$ $$\$$ |\$$$$$$\  
#           $$  __$$ |$$ |        $$ |     $$ |  $$ |  $$ |$$ \$$$$ | \____$$\ 
#           $$ |  $$ |$$ |  $$\   $$ |     $$ |  $$ |  $$ |$$ |\$$$ |$$\   $$ |
#           $$ |  $$ |\$$$$$$  |  $$ |   $$$$$$\  $$$$$$  |$$ | \$$ |\$$$$$$  |
#           \__|  \__| \______/   \__|   \______| \______/ \__|  \__| \______/ 
# =======================================================================================
#             Define GitHub Actions to run automated tests on the codebase.
#  Author: Fabio Craig Wimmer Florey                                      Version: 0.0.1
# =======================================================================================

name: Unit Tests and Code Coverage

on: [push]

jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v3
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.10' 
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        python -m pip install tox
        python -m pip install -r requirements.txt
    - name: Test with tox
      run: tox
    - name: Upload coverage report
      if: success()
      uses: codecov/codecov-action@v3
      with:
        file: .coverage
        token: ${{ secret.CODE_COVERAGE }}
